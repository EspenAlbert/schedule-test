name: 'Test Suite'

on:
  workflow_dispatch:
    inputs:
      atlas_cloud_env:
        description: 'Atlas cloud environment used, can be either `dev` or `qa`, empty for `dev`'     
        type: string
        required: false
  workflow_call:
    inputs:
      atlas_cloud_env:
        description: 'Atlas cloud environment used, can be either `dev` or `qa`, empty for `dev`'     
        type: string
        required: false
  schedule:
    # https://crontab.guru/#0_0_2-31_*_0
    - cron: "9,14,19,24,29 * * * *" # expecting qa
    - cron: "5,10,15,20,25 * 2-31 * 1-6" # expecting dev
   

jobs:
  tests:
    runs-on: ubuntu-latest
    name: tests-output-of-atlas-cloud-env
    env:
      atlas_cloud_env: ${{ inputs.atlas_cloud_env || github.event.schedule == '9,14,19,24,29 * * * *' && 'qa' || 'dev' }}
    steps:
      - run: |
          echo $atlas_cloud_env
          echo ${{ github.event.schedule }}
